!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.container=e.Container=void 0;var r=function(){function t(){this._dict={}}return t.instance=function(){return this._instance},t.prototype.get=function(t){if(this._dict[t])return this._dict[t];throw new Error("Could not find a component named "+t+".")},t.prototype.put=function(t,e){if(this._dict[t])throw new Error("There is already a component named "+t+".");this._dict[t]=e},t._instance=new t,t}();e.Container=r,e.container=function(t,e){return void 0===e&&(e=null),e?(r.instance().put(t,e),e):r.instance().get(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ENV=void 0,e.ENV={appName:"zip-lite",appVersion:"1.0.1",tracking:!0,ads:!0,adsMinIntervalMillis:9e4}},function(t,e,n){"use strict";var r,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.InputListener=e.Input=void 0,function(t){t[t.up=0]="up",t[t.down=1]="down",t[t.left=2]="left",t[t.right=3]="right",t[t.enter=4]="enter",t[t.back=5]="back",t[t.softLeft=6]="softLeft",t[t.softRight=7]="softRight",t[t.softReset=8]="softReset",t[t.softPrev=9]="softPrev",t[t.softNext=10]="softNext",t[t.softClear=11]="softClear",t[t.softOpen=12]="softOpen",t[t.hash=13]="hash"}(r=e.Input||(e.Input={}));var s=function(){function t(t){var e=this;this._listener=t,this._listening=!1,this._keydownListener=function(t){return e.keydown(t)}}return t.prototype.start=function(){if(this._listening)throw new Error("Listener is working.");this._listening=!0,this._busy=!1,window.addEventListener("keydown",this._keydownListener)},t.prototype.stop=function(){if(!this._listener)throw new Error("Listener is not working.");this._listening=!1,window.removeEventListener("keydown",this._keydownListener)},t.prototype.pause=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:this.stop(),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t()];case 2:return e.sent(),[3,4];case 3:return this.start(),[7];case 4:return[2]}}))}))},t.prototype.handle=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._listener?[4,this._listener(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.keydown=function(t){var e=this;if(!this._busy){this._busy=!0;var n=null;"ArrowUp"===t.key?(n=this.handle(r.up),t.preventDefault()):"ArrowDown"===t.key?(n=this.handle(r.down),t.preventDefault()):"ArrowLeft"===t.key?(n=this.handle(r.left),t.preventDefault()):"ArrowRight"===t.key?(n=this.handle(r.right),t.preventDefault()):"Enter"===t.key?(n=this.handle(r.enter),t.preventDefault()):"Backspace"===t.key?(n=this.handle(r.back),t.preventDefault()):"SoftLeft"===t.key||81===t.keyCode?(n=this.handle(r.softLeft),t.preventDefault()):"SoftRight"===t.key||69===t.keyCode?(n=this.handle(r.softRight),t.preventDefault()):87===t.keyCode||50===t.keyCode||"2"===t.key?(n=this.handle(r.softReset),t.preventDefault()):65===t.keyCode||49===t.keyCode||"1"===t.key?(n=this.handle(r.softPrev),t.preventDefault()):68===t.keyCode||51===t.keyCode||"3"===t.key?(n=this.handle(r.softNext),t.preventDefault()):88===t.keyCode||163===t.keyCode||"#"===t.key?(n=this.handle(r.hash),t.preventDefault()):67===t.keyCode||53===t.keyCode||"5"===t.key?(n=this.handle(r.softClear),t.preventDefault()):86!==t.keyCode&&54!==t.keyCode&&"6"!==t.key||(n=this.handle(r.softOpen),t.preventDefault()),n?n.then((function(){e._busy=!1}),(function(t){e._busy=!1,console.error(t)})):this._busy=!1}},t}();e.InputListener=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.menuViewFactory=e.MenuView=void 0;var o=n(0),s=n(20),a=n(2),u=function(){function t(t,e){var n=this;this._body=t,this._navbar=e,this._inputListener=new a.InputListener((function(t){return n.onInput(t)})),this._items=[]}return t.prototype.start=function(){this._container=document.createElement("div"),this._container.className="view menu",this._container.innerHTML='<ul class="items"></ul>',this._body.appendChild(this._container),this._list=this._container.getElementsByClassName("items")[0],this._navbar.clear(),this._inputListener.start()},t.prototype.stop=function(){this._inputListener.stop(),this._container.remove()},t.prototype.setItems=function(t,e){var n=this;void 0===e&&(e=0),this._items.length=0,this._currentItemIndex=null,this._list.innerHTML="",t.length>0&&(t.forEach((function(t){return n.appendItem(t)})),this.selectItem(e))},t.prototype.appendItem=function(t){if(t.create(),!t.element)throw new Error("Element is empty after create() called.");this._list.appendChild(t.element),this._items.push(t)},t.prototype.selectItem=function(t){null!==this._currentItemIndex&&this._items[this._currentItemIndex].element.classList.remove("selected"),t>=this._items.length?t=0:t<0&&(t=this._items.length-1);var e=this._items[t];e.element.classList.add("selected"),this._currentItemIndex=t,this._list.scrollTop=s.getRelativeOffsetY(this._list,e.element),this._navbar.setCenterTip(e.navbarText)},t.prototype.pauseInputListener=function(t){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(n){switch(n.label){case 0:return this._navbar.saveState(),[4,this._inputListener.pause((function(){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),this._navbar.restoreState(),[2]}}))}))}))];case 1:return n.sent(),[2]}}))}))},t.prototype.tryGetSelected=function(){return null!==this._currentItemIndex?this._items[this._currentItemIndex]:null},t.prototype.leave=function(){this.onLeave&&this.onLeave()},t.prototype.onInput=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:switch(t){case a.Input.up:return[3,1];case a.Input.down:return[3,2];case a.Input.enter:return[3,3];case a.Input.back:return[3,6]}return[3,7];case 1:return this._items.length>0&&this.selectItem(this._currentItemIndex-1),[3,8];case 2:return this._items.length>0&&this.selectItem(this._currentItemIndex+1),[3,8];case 3:return this._items.length>0?[4,this._items[this._currentItemIndex].execute()]:[3,5];case 4:e.sent(),e.label=5;case 5:return[3,8];case 6:return this.leave(),[3,8];case 7:return this.onNotHandledInput&&this.onNotHandledInput(t),[3,8];case 8:return[2]}}))}))},t}();e.MenuView=u,e.menuViewFactory=function(t){return new u(t,o.container("Navbar"))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleMenuItem=e.DEFAULT_COMMAND=void 0,e.DEFAULT_COMMAND="_default";var o=function(){function t(t,e,n,r,i){this._label=t,this._subtitle=e,this._icon=n,this.navbarText=r,this._onExecute=i}return t.prototype.create=function(){return this.element=document.createElement("li"),this.element.className="item simple-item",this.element.innerHTML='<div class="simple">\n\t\t\t\t<div class="left">\n\t\t\t\t\t<span class="icon"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="right">\n\t\t\t\t\t<strong class="title"></strong>\n\t\t\t\t\t<span class="subtitle"></span>\n\t\t\t\t</div>\n\t\t\t</div>',this.reload(),this.element},t.prototype.reload=function(){this.element.getElementsByClassName("icon")[0].className="icon "+this._icon,this.element.getElementsByClassName("title")[0].innerHTML=this._label;var t=this.element.getElementsByClassName("subtitle")[0];this._subtitle?t.innerHTML=this._subtitle:t.style.display="none"},t.prototype.change=function(t,e){this._label=t,this._icon=e,this.reload()},t.prototype.execute=function(t){return void 0===t&&(t=null),r(this,void 0,void 0,(function(){return i(this,(function(n){return t||(t=e.DEFAULT_COMMAND),this._onExecute(this,t),[2]}))}))},t}();e.SimpleMenuItem=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readFile=void 0,e.readFile=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(){n("Failed to read file. "+r.error)},r.readAsArrayBuffer(t)}))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.browseArchiveViewFactory=e.createBrowseArchiveContext=e.BrowseArchiveView=void 0;var o=n(0),s=n(2),a=n(17),u=n(19),c=n(7),l=n(3),f=n(4),h=function(){function t(t,e,n,r,i,o,s){var a=this;this._menuView=t,this._router=e,this._navbar=n,this._loading=r,this._prompt=i,this._adsManager=o,this._fileStorage=s,this._menuView.onLeave=function(){return a.end()},this._menuView.onNotHandledInput=function(t){return a.onInput(t)}}return t.prototype.init=function(t){this._menuView.start(),this._navbar.setLeftTip("Extract all"),this._navbar.setPathTheme("archive"),this._context=t,this.reload()},t.prototype.reload=function(){var t=this,e=u.getFileName(this._context.archivePath);this._navbar.setPath("~/"+e+"/"+(this._context.context.current.path||""));var n=this._context.context.current.children;n.sort((function(t,e){return e.children.length-t.children.length})),this._menuView.setItems(n.map((function(e){if(e.children.length>0)return new f.SimpleMenuItem(e.name,null,"folder","Open folder",(function(){return t.browseFolder(e)}));var n=t._context.files.find((function(t){return t.path===e.path})),r=Math.ceil(n.size/1024);return new f.SimpleMenuItem(e.name,r+" KB","file","Extract",(function(){return t.extractFile(e)}))})))},t.prototype.destroy=function(){this._menuView.stop()},t.prototype.browseFolder=function(t){var e={archivePath:this._context.archivePath,fileBytes:this._context.fileBytes,files:this._context.files,context:{tree:this._context.context.tree,current:t}};this._router.navigate("browseArchive",e)},t.prototype.extractFile=function(t){this.unpack([t.path])},t.prototype.onInput=function(t){switch(t){case s.Input.softLeft:this.unpack(this._context.files.map((function(t){return t.path})))}},t.prototype.unpack=function(t){var e=this;return this._menuView.pauseInputListener((function(){return r(e,void 0,void 0,(function(){var e,n,o,s,c=this;return i(this,(function(l){switch(l.label){case 0:return f=this._context.archivePath,e="extracted_files/"+u.getFileNameWithoutExt(u.getFileName(f))+"/",n=null,[4,this._loading.handle((function(){return r(c,void 0,void 0,(function(){var o,s=this;return i(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,a.unpackZipArchive(this._context.fileBytes,this._context.archivePath,t,(function(t,n){return r(s,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return r=e+t,[4,this._fileStorage.writeFile(r,new Blob([n],{type:"application/octet-stream"}))];case 1:return i.sent(),[2]}}))}))}))];case 1:return u.sent(),[3,3];case 2:return o=u.sent(),n=o,[3,3];case 3:return[2]}}))}))}))];case 1:return l.sent(),n?[4,this._prompt.promptError(n)]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,this._adsManager.tryDisplay()];case 4:return l.sent(),o="/sdcard/"+e,s=1===t.length?"Successfully extracted one file to: "+o:"Successfully extracted "+t.length+" files to: "+o,[4,this._prompt.prompt(s,!1)];case 5:l.sent(),this._router.clear("browse"),l.label=6;case 6:return[2]}var f}))}))}))},t.prototype.end=function(){this._router.navigateBack()},t}();e.BrowseArchiveView=h,e.createBrowseArchiveContext=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,a.scanZipArchive(t)];case 1:return n=i.sent(),r=c.parseTree(n.map((function(t){return t.path}))),[2,{archivePath:e,context:{current:r,tree:r},fileBytes:t,files:n}]}}))}))},e.browseArchiveViewFactory=function(t){return new h(l.menuViewFactory(t),o.container("Router"),o.container("Navbar"),o.container("Loading"),o.container("Prompt"),o.container("AdsManager"),o.container("FileStorage"))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTree=void 0,e.parseTree=function(t){var e={parent:null,children:[]};return t.forEach((function(t){var n=t.split("/"),r=e;n.forEach((function(t,e){var i=r.children.find((function(e){return e.name===t}));i||(i={name:t,path:n.slice(0,e+1).join("/"),parent:r,children:[]},r.children.push(i)),r=i}))})),e}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),s=n(0),a=n(1),u=n(10),c=n(11),l=n(12),f=n(13),h=n(14),p=n(5),d=n(15),v=n(16),y=n(6),w=n(21),b=n(22),m=n(23),g=new(function(){function t(){this._startFile=null}return t.prototype.start=function(){var t=this;document.getElementById("app-version").innerText=a.ENV.appVersion;var e=document.getElementById("body");this.installComponents(),this.installViews(e),this._splashView.onEnd=function(){t._splashView.destroy(),t._startFile?t.loadStartFile():t._router.navigate("root")},this._splashView.init()},t.prototype.installComponents=function(){this._prompt=s.container("Prompt",new l.Prompt),this._prompt.bind(),this._loading=s.container("Loading",new u.Loading),this._loading.bind(),this._router=s.container("Router",new f.Router),s.container("Navbar",new c.Navbar).bind(),s.container("AdsManager",new o.AdsManager),s.container("FileStorage",v.isKaiOs()?new h.KaiosFileStorage:new d.TestFileStorage)},t.prototype.installViews=function(t){this._splashView=m.splashViewFactory(),this._splashView.bind(),this._router.register("root",b.rootViewFactory(t)),this._router.register("browse",w.browseViewFactory(t)),this._router.register("browseArchive",y.browseArchiveViewFactory(t))},t.prototype.setStartFile=function(t){this._startFile=t},t.prototype.loadStartFile=function(){return r(this,void 0,void 0,(function(){var t,e,n=this;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,4]),[4,this._loading.handle((function(){return r(n,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,p.readFile(this._startFile)];case 1:return e=n.sent(),[4,y.createBrowseArchiveContext(e,this._startFile.name)];case 2:return t=n.sent(),[2]}}))}))}))];case 1:return o.sent(),this._router.navigate("browseArchive",t),[3,4];case 2:return e=o.sent(),[4,this._prompt.promptError(e)];case 3:return o.sent(),this._router.navigate("root"),[3,4];case 4:return[2]}}))}))},t}());window.addEventListener("load",(function(){g.start()})),v.isKaiOs()&&navigator.mozSetMessageHandler("activity",(function(t){var e=t.source;"open"===e.name&&e.data&&e.data.blob&&g.setStartFile(e.data.blob)}))},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Ad=e.AdsManager=void 0;var o=n(1),s=function(){function t(){}return t.prototype.tryLoad=function(){return this._lastLoadTime=(new Date).getTime(),new Promise((function(t){try{getKaiAd({publisher:"749441b3-ac5b-431c-9e2a-3ed390123441",app:"n4no.com.zipLite",slot:"fullscreen",timeout:15e3,onerror:function(e){t(null),console.error("KaiAd error: "+e+".")},onready:function(e){t(new a(e)),console.info("KaiAd ready.")}})}catch(e){console.error("getKaiAd error: "+e+"."),t(null)}}))},t.prototype.tryDisplay=function(){return r(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return this.canDisplayAd()?[4,this.tryLoad()]:[3,3];case 1:return(t=e.sent())?[4,t.display()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.canDisplayAd=function(){return o.ENV.ads&&!this._lastLoadTime||(new Date).getTime()-this._lastLoadTime>o.ENV.adsMinIntervalMillis},t}();e.AdsManager=s;var a=function(){function t(t){this._ad=t}return t.prototype.display=function(){var t=this;return new Promise((function(e){t._ad.on("close",e),t._ad.call("display")}))},t}();e.Ad=a},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Loading=void 0;var o=function(){function t(){}return t.prototype.bind=function(){this._loading=document.getElementById("loading")},t.prototype.show=function(){this._loading.style.display="block"},t.prototype.hide=function(){this._loading.style.display="none"},t.prototype.handle=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:this.show(),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t()];case 2:return e.sent(),[3,4];case 3:return this.hide(),[7];case 4:return[2]}}))}))},t}();e.Loading=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Navbar=void 0;var r=function(){function t(){}return t.prototype.bind=function(){var t=document.getElementById("navbar"),e=t.getElementsByClassName("tip");this._left=e[0].getElementsByClassName("text")[0],this._center=e[1].getElementsByClassName("text")[0],this._pathElement=t.getElementsByClassName("path")[0],this._pathTextElement=this._pathElement.getElementsByClassName("text")[0]},t.prototype.clear=function(){this.setLeftTip(null),this.setCenterTip(null),this.setPath(null)},t.prototype.setLeftTip=function(t){this._leftText=t,this._left.innerHTML=t},t.prototype.setCenterTip=function(t){this._centerText=t,this._center.innerHTML=t},t.prototype.setPath=function(t){t&&t.length>32&&(t="..."+t.substring(t.length-32)),this._pathText=t,this._pathTextElement.innerHTML=t},t.prototype.setPathTheme=function(t){this._pathTheme=t,this._pathElement.className="path theme-"+t},t.prototype.saveState=function(){this._state=[this._leftText,this._centerText,this._pathText,this._pathTheme]},t.prototype.restoreState=function(){this.setLeftTip(this._state[0]||""),this.setCenterTip(this._state[1]||""),this.setPath(this._state[2]||""),this.setPathTheme(this._state[3]||"")},t}();e.Navbar=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.PromptInputType=e.Prompt=void 0;var o,s=n(2),a=function(){function t(){var t=this;this._inputListener=new s.InputListener((function(e){return t.onInput(e)}))}return t.prototype.bind=function(){var t=this;this._prompt=document.getElementById("prompt"),this._question=this._prompt.getElementsByClassName("question")[0],this._input=this._prompt.getElementsByClassName("input")[0],this._input.addEventListener("keydown",(function(e){return t.onKeyDown(e)})),this._yes=this._prompt.getElementsByClassName("yes")[0],this._no=this._prompt.getElementsByClassName("no")[0]},t.prototype.promptError=function(t){return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){return e=t instanceof Error?t.message:t,[2,this.prompt("An error has occured ("+e+")",!1)]}))}))},t.prototype.prompt=function(t,e,n,s){return r(this,void 0,void 0,(function(){var r=this;return i(this,(function(i){switch(this._yesNoMode=e,this._inputType=n,this._prompt.style.display="block",this._no.style.display=e?"inline-block":"none",this._question.textContent=t,this._input.style.display=n?"inline-block":"none",this._input.value=s||"",n){case o.number:this._input.setAttribute("pattern","[0-9]{1,}"),this._input.setAttribute("type","text");break;case o.password:this._input.setAttribute("pattern",".{1,}"),this._input.setAttribute("type","password");break;case o.text:this._input.removeAttribute("pattern"),this._input.setAttribute("type","text")}return n?this.openInput():(this._inputListener.start(),this.select(!0)),[2,new Promise((function(t){r._resolve=t}))]}))}))},t.prototype.select=function(t){null===t?(this._yes.classList.remove("selected"),this._no.classList.remove("selected")):((t?this._yes:this._no).classList.add("selected"),(t?this._no:this._yes).classList.remove("selected"))},t.prototype.getSelected=function(){return!!this._yes.classList.contains("selected")||!this._no.classList.contains("selected")&&null},t.prototype.stopListenerAndFinish=function(t){this._inputListener.stop(),this.finish(t)},t.prototype.stopListenerAndOpenInput=function(){this._inputListener.stop(),this.openInput()},t.prototype.closeInputAndFinish=function(t){this.closeInput(),this.finish(t)},t.prototype.closeInputAndStartListener=function(){this.closeInput(),this._inputListener.start()},t.prototype.openInput=function(){var t=this;this._input.focus(),this.select(null),this._focusIv=setInterval((function(){document.activeElement!==t._input&&(t._input.focus(),console.info("Focus reverted."))}),500)},t.prototype.closeInput=function(){clearInterval(this._focusIv),this._input.blur(),this.select(!0)},t.prototype.finish=function(t){this._inputType&&(this.text=this._input.value),this._prompt.style.display="none",this._resolve(t)},t.prototype.onInput=function(t){return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(t){case s.Input.left:case s.Input.right:this._yesNoMode&&this.select(!this.getSelected());break;case s.Input.up:this._inputType&&this.stopListenerAndOpenInput();break;case s.Input.enter:e=this.getSelected(),(!this._inputType||!1===e||!0===e&&this._input.checkValidity())&&this.stopListenerAndFinish(e);break;case s.Input.back:this.stopListenerAndFinish(null)}return[2]}))}))},t.prototype.onKeyDown=function(t){"ArrowDown"===t.key||"ArrowUp"===t.key||"Backspace"===t.key&&this._input.value.length<1?(t.preventDefault(),t.stopPropagation(),this.closeInputAndStartListener()):"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),this._input.checkValidity()&&this.closeInputAndFinish(!0))},t}();e.Prompt=a,function(t){t[t.password=1]="password",t[t.number=2]="number",t[t.text=3]="text"}(o=e.PromptInputType||(e.PromptInputType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0;var r=function(){function t(){this._states=[],this._targets={}}return t.prototype.navigate=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._states.length>0){var r=this._states[0];this.doNavigate(r.targetName,t,e)}else this.doNavigate(null,t,e)},t.prototype.doNavigate=function(t,e,n){var r=this._targets[e];if(!r)throw new Error("Could not find target "+e+".");t&&this._targets[t].destroy();this._states.unshift({targetName:e,args:n}),this._states.length>5&&this._states.splice(5,this._states.length-5),r.init.apply(r,n)},t.prototype.navigateBack=function(){if(this._states.length>1){var t=this._states[0],e=this._states[1];this._states.splice(0,2),this.doNavigate(t.targetName,e.targetName,e.args)}else{var n=Object.keys(this._targets)[0];this.navigate(n)}},t.prototype.register=function(t,e){this._targets[t]=e},t.prototype.clear=function(t){for(var e=0;e<this._states.length;e++)this._states[e].targetName===t&&(this._states.splice(e,1),e--)},t}();e.Router=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KaiosFileStorage=void 0;var o=n(5),s=function(){function t(){}return t.prototype.getAllFiles=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t,e){var n=u(),r=[],i=0;!function o(){if(i>=n.length)t(r);else{var s=n[i].enumerate();s.onsuccess=function(){if(s.result){var t=s.result;r.push(t.name.substring(1)),this.continue()}else i++,o()},s.onerror=function(){e(this.error)}}}()}))]}))}))},t.prototype.readFile=function(t){var e=function(t){return{storageName:t.split("/")[0],path:"/"+t}}(t);return new Promise((function(n,r){try{var i=a(e.storageName).get(e.path);i.onsuccess=function(){var t=this.result;o.readFile(t).then((function(t){return n(t)}),(function(t){return r(t)}))},i.onerror=function(e){var n="Unable to get the file: "+t+".";console.error(n,e),r(n)}}catch(t){r(t)}}))},t.prototype.writeFile=function(t,e){return new Promise((function(n,r){function i(i){var o=i.addNamed(e,t);o.onsuccess=function(){n()},o.onerror=function(){r("Unable to create the file: "+t+".")}}try{var o=a("sdcard"),s=o.delete(t);s.onsuccess=function(){return i(o)},s.onerror=function(){return i(o)}}catch(t){r(t)}}))},t}();function a(t){var e=u().find((function(e){return e.storageName===t}));if(!e)throw new Error("Cannot find storage: "+t);return e}function u(){var t=navigator.getDeviceStorages("sdcard");return console.log(t),t}e.KaiosFileStorage=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TestFileStorage=void 0;var o=function(){function t(){}return t.prototype.getAllFiles=function(){return new Promise((function(t){setTimeout((function(){t(["samples/simple.zip","samples/foo/password_111.zip","samples/foo/sooome loong filename of archive.zip","samples/damaged.zip","samples/single.gz","x.zip"])}),200)}))},t.prototype.readFile=function(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET","../"+t),r.responseType="arraybuffer",r.onload=function(){200===r.status?e(r.response):n(r.statusText)},r.onerror=function(){n(r.statusText)},r.send()}))},t.prototype.writeFile=function(t,e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2]}))}))},t}();e.TestFileStorage=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isKaiOs=void 0,e.isKaiOs=function(){return"function"==typeof navigator.getDeviceStorage}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.unpackZipArchive=e.scanZipArchive=void 0;var o=n(18);function s(t,e){return new Promise((function(n,r){var i=null,s=null,a=new o.Unzip((function(t){t.name===e&&(t.ondata=function(e,n){e?i=e:s=n,t.terminate()},t.start())}));a.register(o.UnzipInflate),a.push(t,!0),i?r(i):s?n(s):r("Archive does not contain file "+e+".")}))}e.scanZipArchive=function(t){return new Promise((function(e,n){var r=[];var i=new o.Unzip((function(t){t.name.endsWith("/")||r.push({path:t.name,size:t.originalSize})}));i.register(o.UnzipInflate),i.push(new Uint8Array(t),!0),0===r.length?n("This file is damaged or empty."):e(r)}))},e.unpackZipArchive=function(t,e,n,o){return r(this,void 0,void 0,(function(){var e,r,a,u,c;return i(this,(function(i){switch(i.label){case 0:e=new Uint8Array(t),r=0,a=n,i.label=1;case 1:return r<a.length?(u=a[r],[4,s(e,u)]):[3,5];case 2:return c=i.sent(),[4,o(u,c)];case 3:i.sent(),i.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}},function(t,e,n){"use strict";n.r(e),n.d(e,"Deflate",(function(){return gt})),n.d(e,"AsyncDeflate",(function(){return _t})),n.d(e,"deflate",(function(){return xt})),n.d(e,"deflateSync",(function(){return kt})),n.d(e,"Inflate",(function(){return It})),n.d(e,"AsyncInflate",(function(){return St})),n.d(e,"inflate",(function(){return Mt})),n.d(e,"inflateSync",(function(){return At})),n.d(e,"Gzip",(function(){return Et})),n.d(e,"AsyncGzip",(function(){return Tt})),n.d(e,"gzip",(function(){return Pt})),n.d(e,"gzipSync",(function(){return Lt})),n.d(e,"Gunzip",(function(){return Ft})),n.d(e,"AsyncGunzip",(function(){return Ct})),n.d(e,"gunzip",(function(){return Nt})),n.d(e,"gunzipSync",(function(){return Vt})),n.d(e,"Zlib",(function(){return Ot})),n.d(e,"AsyncZlib",(function(){return zt})),n.d(e,"zlib",(function(){return Dt})),n.d(e,"zlibSync",(function(){return Bt})),n.d(e,"Unzlib",(function(){return jt})),n.d(e,"AsyncUnzlib",(function(){return Ut})),n.d(e,"unzlib",(function(){return Rt})),n.d(e,"unzlibSync",(function(){return Gt})),n.d(e,"compress",(function(){return Pt})),n.d(e,"AsyncCompress",(function(){return Tt})),n.d(e,"compressSync",(function(){return Lt})),n.d(e,"Compress",(function(){return Et})),n.d(e,"Decompress",(function(){return Ht})),n.d(e,"AsyncDecompress",(function(){return Zt})),n.d(e,"decompress",(function(){return Kt})),n.d(e,"decompressSync",(function(){return Wt})),n.d(e,"DecodeUTF8",(function(){return $t})),n.d(e,"EncodeUTF8",(function(){return te})),n.d(e,"strToU8",(function(){return ee})),n.d(e,"strFromU8",(function(){return ne})),n.d(e,"ZipPassThrough",(function(){return ce})),n.d(e,"ZipDeflate",(function(){return le})),n.d(e,"AsyncZipDeflate",(function(){return fe})),n.d(e,"Zip",(function(){return he})),n.d(e,"zip",(function(){return pe})),n.d(e,"zipSync",(function(){return de})),n.d(e,"UnzipPassThrough",(function(){return ve})),n.d(e,"UnzipInflate",(function(){return ye})),n.d(e,"AsyncUnzipInflate",(function(){return we})),n.d(e,"Unzip",(function(){return be})),n.d(e,"unzip",(function(){return me})),n.d(e,"unzipSync",(function(){return ge}));var r={},i=Uint8Array,o=Uint16Array,s=Uint32Array,a=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(t,e){for(var n=new o(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new s(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},f=l(a,2),h=f[0],p=f[1];h[28]=258,p[258]=28;for(var d=l(u,0),v=d[0],y=d[1],w=new o(32768),b=0;b<32768;++b){var m=(43690&b)>>>1|(21845&b)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,w[b]=((65280&m)>>>8|(255&m)<<8)>>>1}var g=function(t,e,n){for(var r=t.length,i=0,s=new o(e);i<r;++i)++s[t[i]-1];var a,u=new o(e);for(i=0;i<e;++i)u[i]=u[i-1]+s[i-1]<<1;if(n){a=new o(1<<e);var c=15-e;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],f=e-t[i],h=u[t[i]-1]++<<f,p=h|(1<<f)-1;h<=p;++h)a[w[h]>>>c]=l}else for(a=new o(r),i=0;i<r;++i)a[i]=w[u[t[i]-1]++]>>>15-t[i];return a},_=new i(288);for(b=0;b<144;++b)_[b]=8;for(b=144;b<256;++b)_[b]=9;for(b=256;b<280;++b)_[b]=7;for(b=280;b<288;++b)_[b]=8;var x=new i(32);for(b=0;b<32;++b)x[b]=5;var k=g(_,9,0),I=g(_,9,1),S=g(x,5,0),M=g(x,5,1),A=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},E=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>>(7&e)&n},T=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(7&e)},P=function(t){return(t/8|0)+(7&t&&1)},L=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(t instanceof o?o:t instanceof s?s:i)(n-e);return r.set(t.subarray(e,n)),r},F=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new i(0);var o=!e||n,s=!n||n.i;n||(n={}),e||(e=new i(3*r));var l=function(t){var n=e.length;if(t>n){var r=new i(Math.max(2*n,t));r.set(e),e=r}},f=n.f||0,p=n.p||0,d=n.b||0,y=n.l,w=n.d,b=n.m,m=n.n,_=8*r;do{if(!y){n.f=f=E(t,p,1);var x=E(t,p+1,3);if(p+=3,!x){var k=t[(U=P(p)+4)-4]|t[U-3]<<8,S=U+k;if(S>r){if(s)throw"unexpected EOF";break}o&&l(d+k),e.set(t.subarray(U,S),d),n.b=d+=k,n.p=p=8*S;continue}if(1==x)y=I,w=M,b=9,m=5;else{if(2!=x)throw"invalid block type";var F=E(t,p,31)+257,C=E(t,p+10,15)+4,N=F+E(t,p+5,31)+1;p+=14;for(var V=new i(N),O=new i(19),z=0;z<C;++z)O[c[z]]=E(t,p+3*z,7);p+=3*C;var D=A(O),B=(1<<D)-1;if(!s&&p+N*(D+7)>_)break;var j=g(O,D,1);for(z=0;z<N;){var U,R=j[E(t,p,B)];if(p+=15&R,(U=R>>>4)<16)V[z++]=U;else{var G=0,H=0;for(16==U?(H=3+E(t,p,3),p+=2,G=V[z-1]):17==U?(H=3+E(t,p,7),p+=3):18==U&&(H=11+E(t,p,127),p+=7);H--;)V[z++]=G}}var Z=V.subarray(0,F),K=V.subarray(F);b=A(Z),m=A(K),y=g(Z,b,1),w=g(K,m,1)}if(p>_)throw"unexpected EOF"}o&&l(d+131072);for(var W=(1<<b)-1,q=(1<<m)-1,Y=b+m+18;s||p+Y<_;){var X=(G=y[T(t,p)&W])>>>4;if((p+=15&G)>_)throw"unexpected EOF";if(!G)throw"invalid length/literal";if(X<256)e[d++]=X;else{if(256==X){y=null;break}var J=X-254;if(X>264){var Q=a[z=X-257];J=E(t,p,(1<<Q)-1)+h[z],p+=Q}var $=w[T(t,p)&q],tt=$>>>4;if(!$)throw"invalid distance";p+=15&$;K=v[tt];if(tt>3){Q=u[tt];K+=T(t,p)&(1<<Q)-1,p+=Q}if(p>_)throw"unexpected EOF";o&&l(d+131072);for(var et=d+J;d<et;d+=4)e[d]=e[d-K],e[d+1]=e[d+1-K],e[d+2]=e[d+2-K],e[d+3]=e[d+3-K];d=et}}n.l=y,n.p=p,n.b=d,y&&(f=1,n.m=b,n.d=w,n.n=m)}while(!f);return d==e.length?e:L(e,0,d)},C=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>>8},N=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},V=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return[R,0];if(1==s){var u=new i(n[0].s+1);return u[n[0].s]=1,[u,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var c=n[0],l=n[1],f=0,h=1,p=2;for(n[0]={s:-1,f:c.f+l.f,l:c,r:l};h!=s-1;)c=n[n[f].f<n[p].f?f++:p++],l=n[f!=h&&n[f].f<n[p].f?f++:p++],n[h++]={s:-1,f:c.f+l.f,l:c,r:l};var d=a[0].s;for(r=1;r<s;++r)a[r].s>d&&(d=a[r].s);var v=new o(d+1),y=O(n[h-1],v,0);if(y>e){r=0;var w=0,b=y-e,m=1<<b;for(a.sort((function(t,e){return v[e.s]-v[t.s]||t.f-e.f}));r<s;++r){var g=a[r].s;if(!(v[g]>e))break;w+=m-(1<<y-v[g]),v[g]=e}for(w>>>=b;w>0;){var _=a[r].s;v[_]<e?w-=1<<e-v[_]++-1:++r}for(;r>=0&&w;--r){var x=a[r].s;v[x]==e&&(--v[x],++w)}y=e}return[new i(v),y]},O=function(t,e,n){return-1==t.s?Math.max(O(t.l,e,n+1),O(t.r,e,n+1)):e[t.s]=n},z=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new o(++e),r=0,i=t[0],s=1,a=function(t){n[r++]=t},u=1;u<=e;++u)if(t[u]==i&&u!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=t[u]}return[n.subarray(0,r),e]},D=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},B=function(t,e,n){var r=n.length,i=P(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},j=function(t,e,n,r,i,s,l,f,h,p,d){C(e,d++,n),++i[256];for(var v=V(i,15),y=v[0],w=v[1],b=V(s,15),m=b[0],I=b[1],M=z(y),A=M[0],E=M[1],T=z(m),P=T[0],L=T[1],F=new o(19),O=0;O<A.length;++O)F[31&A[O]]++;for(O=0;O<P.length;++O)F[31&P[O]]++;for(var j=V(F,7),U=j[0],R=j[1],G=19;G>4&&!U[c[G-1]];--G);var H,Z,K,W,q=p+5<<3,Y=D(i,_)+D(s,x)+l,X=D(i,y)+D(s,m)+l+14+3*G+D(F,U)+(2*F[16]+3*F[17]+7*F[18]);if(q<=Y&&q<=X)return B(e,d,t.subarray(h,h+p));if(C(e,d,1+(X<Y)),d+=2,X<Y){H=g(y,w,0),Z=y,K=g(m,I,0),W=m;var J=g(U,R,0);C(e,d,E-257),C(e,d+5,L-1),C(e,d+10,G-4),d+=14;for(O=0;O<G;++O)C(e,d+3*O,U[c[O]]);d+=3*G;for(var Q=[A,P],$=0;$<2;++$){var tt=Q[$];for(O=0;O<tt.length;++O){var et=31&tt[O];C(e,d,J[et]),d+=U[et],et>15&&(C(e,d,tt[O]>>>5&127),d+=tt[O]>>>12)}}}else H=k,Z=_,K=S,W=x;for(O=0;O<f;++O)if(r[O]>255){et=r[O]>>>18&31;N(e,d,H[et+257]),d+=Z[et+257],et>7&&(C(e,d,r[O]>>>23&31),d+=a[et]);var nt=31&r[O];N(e,d,K[nt]),d+=W[nt],nt>3&&(N(e,d,r[O]>>>5&8191),d+=u[nt])}else N(e,d,H[r[O]]),d+=Z[r[O]];return N(e,d,H[256]),d+Z[256]},U=new s([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),R=new i(0),G=function(t,e,n,r,c,l){var f=t.length,h=new i(r+f+5*(1+Math.ceil(f/7e3))+c),d=h.subarray(r,h.length-c),v=0;if(!e||f<8)for(var w=0;w<=f;w+=65535){var b=w+65535;b<f?v=B(d,v,t.subarray(w,b)):(d[w]=l,v=B(d,v,t.subarray(w,f)))}else{for(var m=U[e-1],g=m>>>13,_=8191&m,x=(1<<n)-1,k=new o(32768),I=new o(x+1),S=Math.ceil(n/3),M=2*S,A=function(e){return(t[e]^t[e+1]<<S^t[e+2]<<M)&x},E=new s(25e3),T=new o(288),F=new o(32),C=0,N=0,V=(w=0,0),O=0,z=0;w<f;++w){var D=A(w),G=32767&w,H=I[D];if(k[G]=H,I[D]=G,O<=w){var Z=f-w;if((C>7e3||V>24576)&&Z>423){v=j(t,d,0,E,T,F,N,V,z,w-z,v),V=C=N=0,z=w;for(var K=0;K<286;++K)T[K]=0;for(K=0;K<30;++K)F[K]=0}var W=2,q=0,Y=_,X=G-H&32767;if(Z>2&&D==A(w-X))for(var J=Math.min(g,Z)-1,Q=Math.min(32767,w),$=Math.min(258,Z);X<=Q&&--Y&&G!=H;){if(t[w+W]==t[w+W-X]){for(var tt=0;tt<$&&t[w+tt]==t[w+tt-X];++tt);if(tt>W){if(W=tt,q=X,tt>J)break;var et=Math.min(X,tt-2),nt=0;for(K=0;K<et;++K){var rt=w-X+K+32768&32767,it=rt-k[rt]+32768&32767;it>nt&&(nt=it,H=rt)}}}X+=(G=H)-(H=k[G])+32768&32767}if(q){E[V++]=268435456|p[W]<<18|y[q];var ot=31&p[W],st=31&y[q];N+=a[ot]+u[st],++T[257+ot],++F[st],O=w+W,++C}else E[V++]=t[w],++T[t[w]]}}v=j(t,d,l,E,T,F,N,V,z,w-z,v),!l&&7&v&&(v=B(d,v+1,R))}return L(h,0,r+P(v)+c)},H=function(){for(var t=new s(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),Z=function(){var t=4294967295;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=H[255&n^e[r]]^n>>>8;t=n},d:function(){return 4294967295^t}}},K=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,o=n.length,s=0;s!=o;){for(var a=Math.min(s+5552,o);s<a;++s)i+=r+=n[s];r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}},W=function(t,e,n,r,i){return G(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!i)},q=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n},Y=function(t,e,n){for(var r=t(),i=t.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),s=0;s<r.length;++s){var a=r[s],u=o[s];if("function"==typeof a){e+=";"+u+"=";var c=a.toString();if(a.prototype)if(-1!=c.indexOf("[native code]")){var l=c.indexOf(" ",8)+1;e+=c.slice(l,c.indexOf("(",l))}else for(var f in e+=c,a.prototype)e+=";"+u+".prototype."+f+"="+a.prototype[f].toString();else e+=c}else n[u]=a}return[e,n]},X=[],J=function(t,e,n,a){var u;if(!X[n]){for(var c="",l={},f=t.length-1,h=0;h<f;++h)c=(u=Y(t[h],c,l))[0],l=u[1];X[n]=Y(t[f],c,l)}var p=q({},X[n][1]);return function(t,e,n,i,o){var s=r[e]||(r[e]=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))),a=new Worker(s);return a.onerror=function(t){return o(t.error,null)},a.onmessage=function(t){return o(null,t.data)},a.postMessage(n,i),a}(X[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",n,p,function(t){var e=[];for(var n in t)(t[n]instanceof i||t[n]instanceof o||t[n]instanceof s)&&e.push((t[n]=new t[n].constructor(t[n])).buffer);return e}(p),a)},Q=function(){return[i,o,s,a,u,c,h,v,I,M,w,g,A,E,T,P,L,F,At,it,ot]},$=function(){return[i,o,s,a,u,c,p,y,k,_,S,x,w,U,R,g,C,N,V,O,z,D,B,j,P,L,G,W,kt,it]},tt=function(){return[pt,yt,ht,Z,H]},et=function(){return[dt,vt]},nt=function(){return[wt,ht,K]},rt=function(){return[bt]},it=function(t){return postMessage(t,[t.buffer])},ot=function(t){return t&&t.size&&new i(t.size)},st=function(t,e,n,r,i,o){var s=J(n,r,i,(function(t,e){s.terminate(),o(t,e)}));return s.postMessage([t,e],e.consume?[t.buffer]:[]),function(){s.terminate()}},at=function(t){return t.ondata=function(t,e){return postMessage([t,e],[t.buffer])},function(e){return t.push(e.data[0],e.data[1])}},ut=function(t,e,n,r,i){var o,s=J(t,r,i,(function(t,n){t?(s.terminate(),e.ondata.call(e,t)):(n[1]&&s.terminate(),e.ondata.call(e,t,n[0],n[1]))}));s.postMessage(n),e.push=function(t,n){if(o)throw"stream finished";if(!e.ondata)throw"no stream handler";s.postMessage([t,o=n],[t.buffer])},e.terminate=function(){s.terminate()}},ct=function(t,e){return t[e]|t[e+1]<<8},lt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+2*(t[e+3]<<23)},ft=function(t,e){return lt(t,e)|4294967296*lt(t,e)},ht=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},pt=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&ht(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},dt=function(t){if(31!=t[0]||139!=t[1]||8!=t[2])throw"invalid gzip data";var e=t[3],n=10;4&e&&(n+=t[10]|2+(t[11]<<8));for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(2&e)},vt=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16)+2*(t[e-1]<<23)},yt=function(t){return 10+(t.filename&&t.filename.length+1||0)},wt=function(t,e){var n=e.level,r=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},bt=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function mt(t,e){return e||"function"!=typeof t||(e=t,t={}),this.ondata=e,t}var gt=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){this.ondata(W(t,this.o,0,0,!e),e)},t.prototype.push=function(t,e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=e,this.p(t,e||!1)},t}(),_t=function(){return function(t,e){ut([$,function(){return[at,gt]}],this,mt.call(this,t,e),(function(t){var e=new gt(t.data);onmessage=at(e)}),6)}}();function xt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return st(t,e,[$],(function(t){return it(kt(t.data[0],t.data[1]))}),0,n)}function kt(t,e){return void 0===e&&(e={}),W(t,e,0,0)}var It=function(){function t(t){this.s={},this.p=new i(0),this.ondata=t}return t.prototype.e=function(t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var e=this.p.length,n=new i(e+t.length);n.set(this.p),n.set(t,e),this.p=n},t.prototype.c=function(t){this.d=this.s.i=t||!1;var e=this.s.b,n=F(this.p,this.o,this.s);this.ondata(L(n,e,this.s.b),this.d),this.o=L(n,this.s.b-32768),this.s.b=this.o.length,this.p=L(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,e){this.e(t),this.c(e)},t}(),St=function(){return function(t){this.ondata=t,ut([Q,function(){return[at,It]}],this,0,(function(){var t=new It;onmessage=at(t)}),7)}}();function Mt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return st(t,e,[Q],(function(t){return it(At(t.data[0],ot(t.data[1])))}),1,n)}function At(t,e){return F(t,e)}var Et=function(){function t(t,e){this.c=Z(),this.l=0,this.v=1,gt.call(this,t,e)}return t.prototype.push=function(t,e){gt.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t),this.l+=t.length;var n=W(t,this.o,this.v&&yt(this.o),e&&8,!e);this.v&&(pt(n,this.o),this.v=0),e&&(ht(n,n.length-8,this.c.d()),ht(n,n.length-4,this.l)),this.ondata(n,e)},t}(),Tt=function(){return function(t,e){ut([$,tt,function(){return[at,gt,Et]}],this,mt.call(this,t,e),(function(t){var e=new Et(t.data);onmessage=at(e)}),8)}}();function Pt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return st(t,e,[$,tt,function(){return[Lt]}],(function(t){return it(Lt(t.data[0],t.data[1]))}),2,n)}function Lt(t,e){void 0===e&&(e={});var n=Z(),r=t.length;n.p(t);var i=W(t,e,yt(e),8),o=i.length;return pt(i,e),ht(i,o-8,n.d()),ht(i,o-4,r),i}var Ft=function(){function t(t){this.v=1,It.call(this,t)}return t.prototype.push=function(t,e){if(It.prototype.e.call(this,t),this.v){var n=this.p.length>3?dt(this.p):4;if(n>=this.p.length&&!e)return;this.p=this.p.subarray(n),this.v=0}if(e){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}It.prototype.c.call(this,e)},t}(),Ct=function(){return function(t){this.ondata=t,ut([Q,et,function(){return[at,It,Ft]}],this,0,(function(){var t=new Ft;onmessage=at(t)}),9)}}();function Nt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return st(t,e,[Q,et,function(){return[Vt]}],(function(t){return it(Vt(t.data[0]))}),3,n)}function Vt(t,e){return F(t.subarray(dt(t),-8),e||new i(vt(t)))}var Ot=function(){function t(t,e){this.c=K(),this.v=1,gt.call(this,t,e)}return t.prototype.push=function(t,e){gt.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t);var n=W(t,this.o,this.v&&2,e&&4,!e);this.v&&(wt(n,this.o),this.v=0),e&&ht(n,n.length-4,this.c.d()),this.ondata(n,e)},t}(),zt=function(){return function(t,e){ut([$,nt,function(){return[at,gt,Ot]}],this,mt.call(this,t,e),(function(t){var e=new Ot(t.data);onmessage=at(e)}),10)}}();function Dt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return st(t,e,[$,nt,function(){return[Bt]}],(function(t){return it(Bt(t.data[0],t.data[1]))}),4,n)}function Bt(t,e){void 0===e&&(e={});var n=K();n.p(t);var r=W(t,e,2,4);return wt(r,e),ht(r,r.length-4,n.d()),r}var jt=function(){function t(t){this.v=1,It.call(this,t)}return t.prototype.push=function(t,e){if(It.prototype.e.call(this,t),this.v){if(this.p.length<2&&!e)return;this.p=this.p.subarray(2),this.v=0}if(e){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}It.prototype.c.call(this,e)},t}(),Ut=function(){return function(t){this.ondata=t,ut([Q,rt,function(){return[at,It,jt]}],this,0,(function(){var t=new jt;onmessage=at(t)}),11)}}();function Rt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return st(t,e,[Q,rt,function(){return[Gt]}],(function(t){return it(Gt(t.data[0],ot(t.data[1])))}),5,n)}function Gt(t,e){return F((bt(t),t.subarray(2,-4)),e)}var Ht=function(){function t(t){this.G=Ft,this.I=It,this.Z=jt,this.ondata=t}return t.prototype.push=function(t,e){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(t,e);else{if(this.p&&this.p.length){var n=new i(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var r=this,o=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(o):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(o):new this.Z(o),this.s.push(this.p,e),this.p=null}}},t}(),Zt=function(){function t(t){this.G=Ct,this.I=St,this.Z=Ut,this.ondata=t}return t.prototype.push=function(t,e){Ht.prototype.push.call(this,t,e)},t}();function Kt(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";return 31==t[0]&&139==t[1]&&8==t[2]?Nt(t,e,n):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Mt(t,e,n):Rt(t,e,n)}function Wt(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?Vt(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?At(t,e):Gt(t,e)}var qt=function(t,e,n,r){for(var o in t){var s=t[o],a=e+o;s instanceof i?n[a]=[s,r]:Array.isArray(s)?n[a]=[s[0],q(r,s[1])]:qt(s,a+"/",n,r)}},Yt="undefined"!=typeof TextEncoder&&new TextEncoder,Xt="undefined"!=typeof TextDecoder&&new TextDecoder,Jt=0;try{Xt.decode(R,{stream:!0}),Jt=1}catch(t){}var Qt=function(t){for(var e="",n=0;;){var r=t[n++],i=(r>127)+(r>223)+(r>239);if(n+i>t.length)return[e,L(t,n-1)];i?3==i?(r=((15&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|r>>10,56320|1023&r)):e+=1&i?String.fromCharCode((31&r)<<6|63&t[n++]):String.fromCharCode((15&r)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(r)}},$t=function(){function t(t){this.ondata=t,Jt?this.t=new TextDecoder:this.p=R}return t.prototype.push=function(t,e){if(!this.ondata)throw"no callback";if(e||(e=!1),this.t)return this.ondata(this.t.decode(t,{stream:!e}),e);var n=new i(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length);var r=Qt(n),o=r[0],s=r[1];if(e&&s.length)throw"invalid utf-8 data";this.p=s,this.ondata(o,e)},t}(),te=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,e){if(!this.ondata)throw"no callback";this.ondata(ee(t),e||!1)},t}();function ee(t,e){if(e){for(var n=new i(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}if(Yt)return Yt.encode(t);var o=t.length,s=new i(t.length+(t.length>>1)),a=0,u=function(t){s[a++]=t};for(r=0;r<o;++r){if(a+5>s.length){var c=new i(a+8+(o-r<<1));c.set(s),s=c}var l=t.charCodeAt(r);l<128||e?u(l):l<2048?(u(192|l>>>6),u(128|63&l)):l>55295&&l<57344?(u(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++r))>>>18),u(128|l>>>12&63),u(128|l>>>6&63),u(128|63&l)):(u(224|l>>>12),u(128|l>>>6&63),u(128|63&l))}return L(s,0,a)}function ne(t,e){if(e){for(var n="",r=0;r<t.length;r+=16384)n+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return n}if(Xt)return Xt.decode(t);var i=Qt(t),o=i[0];if(i[1].length)throw"invalid utf-8 data";return o}var re=function(t){return 1==t?3:t<6?2:9==t?1:0},ie=function(t,e){return e+30+ct(t,e+26)+ct(t,e+28)},oe=function(t,e,n){var r=ct(t,e+28),i=ne(t.subarray(e+46,e+46+r),!(2048&ct(t,e+8))),o=e+46+r,s=lt(t,e+20),a=n&&4294967295==s?se(t,o):[s,lt(t,e+24),lt(t,e+42)],u=a[0],c=a[1],l=a[2];return[ct(t,e+10),u,c,i,o+ct(t,e+30)+ct(t,e+32),l]},se=function(t,e){for(;1!=ct(t,e);e+=4+ct(t,e+2));return[ft(t,e+12),ft(t,e+4),ft(t,e+20)]},ae=function(t,e,n,r,i,o,s){var a=r.length;ht(t,e,null!=s?33639248:67324752),e+=4,null!=s&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(null==o&&8),t[e++]=i&&8,t[e++]=255&n.compression,t[e++]=n.compression>>8;var u=new Date(null==n.mtime?Date.now():n.mtime),c=u.getFullYear()-1980;if(c<0||c>119)throw"date not in range 1980-2099";return ht(t,e,2*(c<<24)|u.getMonth()+1<<21|u.getDate()<<16|u.getHours()<<11|u.getMinutes()<<5|u.getSeconds()>>>1),e+=4,null!=o&&(ht(t,e,n.crc),ht(t,e+4,o),ht(t,e+8,n.size)),ht(t,e+12,a),e+=16,null!=s&&(ht(t,e+6,n.attrs),ht(t,e+10,s),e+=14),t.set(r,e),e+a},ue=function(t,e,n,r,i){ht(t,e,101010256),ht(t,e+8,n),ht(t,e+10,n),ht(t,e+12,r),ht(t,e+16,i)},ce=function(){function t(t){this.filename=t,this.c=Z(),this.size=0,this.compression=0}return t.prototype.process=function(t,e){this.ondata(null,t,e)},t.prototype.push=function(t,e){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(t),this.size+=t.length,e&&(this.crc=this.c.d()),this.process(t,e||!1)},t}(),le=function(){function t(t,e){var n=this;void 0===e&&(e={}),ce.call(this,t),this.d=new gt(e,(function(t,e){n.ondata(null,t,e)})),this.compression=8,this.flag=re(e.level)}return t.prototype.process=function(t,e){try{this.d.push(t,e)}catch(t){this.ondata(t,null,e)}},t.prototype.push=function(t,e){ce.prototype.push.call(this,t,e)},t}(),fe=function(){function t(t,e){var n=this;void 0===e&&(e={}),ce.call(this,t),this.d=new _t(e,(function(t,e,r){n.ondata(t,e,r)})),this.compression=8,this.flag=re(e.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,e){this.d.push(t,e)},t.prototype.push=function(t,e){ce.prototype.push.call(this,t,e)},t}(),he=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var e=this;if(2&this.d)throw"stream finished";var n=ee(t.filename),r=n.length,o=r!=t.filename.length,s=r+30;if(r>65535)throw"filename too long";var a=new i(s);ae(a,0,t,n,o);var u=[a],c=function(){for(var t=0,n=u;t<n.length;t++){var r=n[t];e.ondata(null,r,!1)}u=[]},l=this.d;this.d=0;var f=this.u.length,h=q(t,{f:n,u:o,t:function(){t.terminate&&t.terminate()},r:function(){if(c(),l){var t=e.u[f+1];t?t.r():e.d=1}l=1}}),p=0;t.ondata=function(n,r,o){if(n)e.ondata(n,r,o),e.terminate();else if(p+=r.length,u.push(r),o){var a=new i(16);ht(a,0,134695760),ht(a,4,t.crc),ht(a,8,p),ht(a,12,t.size),u.push(a),h.c=p,h.b=s+p+16,h.crc=t.crc,h.size=t.size,l&&h.r(),l=1}else l&&c()},this.u.push(h)},t.prototype.end=function(){var t=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3},t.prototype.e=function(){for(var t=0,e=0,n=0,r=0,o=this.u;r<o.length;r++){n+=46+(c=o[r]).f.length}for(var s=new i(n+22),a=0,u=this.u;a<u.length;a++){var c=u[a];ae(s,t,c,c.f,c.u,c.c,e),t+=46+c.f.length,e+=c.b}ue(s,t,this.u.length,n,e),this.ondata(null,s,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,e=this.u;t<e.length;t++){e[t].t()}this.d=2},t}();function pe(t,e,n){if(n||(n=e,e={}),"function"!=typeof n)throw"no callback";var r={};qt(t,"",r,e);var o=Object.keys(r),s=o.length,a=0,u=0,c=s,l=new Array(s),f=[],h=function(){for(var t=0;t<f.length;++t)f[t]()},p=function(){var t=new i(u+22),e=a,r=u-a;u=0;for(var o=0;o<c;++o){var s=l[o];try{var f=s.c.length;ae(t,u,s,s.f,s.u,f);var h=u+30+s.f.length;t.set(s.c,h),ae(t,a,s,s.f,s.u,f,u),a+=46+s.f.length,u=h+f}catch(t){return n(t,null)}}ue(t,a,l.length,r,e),n(null,t)};s||p();for(var d=function(t){var e=o[t],i=r[e],c=i[0],d=i[1],v=Z(),y=c.length;v.p(c);var w=ee(e),b=w.length,m=0==d.level?0:8,g=function(r,i){if(r)h(),n(r,null);else{var o=i.length;l[t]=q(d,{size:y,crc:v.d(),c:i,f:w,u:b!=e.length,compression:m}),a+=30+b+o,u+=76+2*b+o,--s||p()}};if(b>65535&&g("filename too long",null),m)if(y<16e4)try{g(null,kt(c,d))}catch(t){g(t,null)}else f.push(xt(c,d,g));else g(null,c)},v=0;v<c;++v)d(v);return h}function de(t,e){void 0===e&&(e={});var n={},r=[];qt(t,"",n,e);var o=0,s=0;for(var a in n){var u=n[a],c=u[0],l=u[1],f=0==l.level?0:8,h=(g=ee(a)).length;if(h>65535)throw"filename too long";var p=f?kt(c,l):c,d=p.length,v=Z();v.p(c),r.push(q(l,{size:c.length,crc:v.d(),c:p,f:g,u:h!=a.length,o:o,compression:f})),o+=30+h+d,s+=76+2*h+d}for(var y=new i(s+22),w=o,b=s-o,m=0;m<r.length;++m){var g=r[m];ae(y,g.o,g,g.f,g.u,g.c.length),y.set(g.c,g.o+30+g.f.length),ae(y,o,g,g.f,g.u,g.c.length,g.o),o+=46+g.f.length}return ue(y,o,r.length,b,w),y}var ve=function(){function t(){}return t.prototype.push=function(t,e){this.ondata(null,t,e)},t.compression=0,t}(),ye=function(){function t(){var t=this;this.i=new It((function(e,n){t.ondata(null,e,n)}))}return t.prototype.push=function(t,e){try{this.i.push(t,e)}catch(n){this.ondata(n,t,e)}},t.compression=8,t}(),we=function(){function t(t,e){var n=this;e<32e4?this.i=new It((function(t,e){n.ondata(null,t,e)})):(this.i=new St((function(t,e,r){n.ondata(t,e,r)})),this.terminate=this.i.terminate)}return t.prototype.push=function(t,e){this.i.terminate&&(t=L(t,0)),this.i.push(t,e)},t.compression=8,t}(),be=function(){function t(t){this.onfile=t,this.k=[],this.o={0:ve},this.p=R}return t.prototype.push=function(t,e){var n=this;if(!this.onfile)throw"no callback";if(this.c>0){var r=Math.min(this.c,t.length),o=t.subarray(0,r);if(this.c-=r,this.d?this.d.push(o,!this.c):this.k[0].push(o),(t=t.subarray(r)).length)return this.push(t,e)}else{var s=0,a=0,u=void 0,c=void 0;this.p.length?t.length?((c=new i(this.p.length+t.length)).set(this.p),c.set(t,this.p.length)):c=this.p:c=t;for(var l=c.length,f=this.c,h=f&&this.d,p=function(){var t,e=lt(c,a);if(67324752==e){s=1,u=a,d.d=null,d.c=0;var r=ct(c,a+6),i=ct(c,a+8),o=2048&r,h=8&r,p=ct(c,a+26),v=ct(c,a+28);if(l>a+30+p+v){var y=[];d.k.unshift(y),s=2;var w=lt(c,a+18),b=lt(c,a+22),m=ne(c.subarray(a+30,a+=30+p),!o);4294967295==w?(t=h?[-2]:se(c,a),w=t[0],b=t[1]):h&&(w=-1),a+=v,d.c=w;var g={name:m,compression:i,start:function(){if(!g.ondata)throw"no callback";if(w){var t=n.o[i];if(!t)throw"unknown compression type "+i;var e=w<0?new t(m):new t(m,w,b);e.ondata=function(t,e,n){g.ondata(t,e,n)};for(var r=0,o=y;r<o.length;r++){var s=o[r];e.push(s,!1)}n.k[0]==y?n.d=e:e.push(R,!0)}else g.ondata(null,R,!0)},terminate:function(){n.k[0]==y&&n.d.terminate&&n.d.terminate()}};w>=0&&(g.size=w,g.originalSize=b),d.onfile(g)}return"break"}if(f){if(134695760==e)return u=a+=12+(-2==f&&8),s=2,d.c=0,"break";if(33639248==e)return u=a-=4,s=2,d.c=0,"break"}},d=this;a<l-4;++a){if("break"===p())break}if(this.p=R,f<0){var v=s?c.subarray(0,u-12-(-2==f&&8)-(134695760==lt(c,u-16)&&4)):c.subarray(0,a);h?h.push(v,!!s):this.k[+(2==s)].push(v)}if(2&s)return this.push(c.subarray(a),e);this.p=c.subarray(a)}if(e&&this.c)throw"invalid zip file"},t.prototype.register=function(t){this.o[t.compression]=t},t}();function me(t,e){if("function"!=typeof e)throw"no callback";for(var n=[],r=function(){for(var t=0;t<n.length;++t)n[t]()},o={},s=t.length-22;101010256!=lt(t,s);--s)if(!s||t.length-s>65558)return void e("invalid zip file",null);var a=ct(t,s+8);a||e(null,{});var u=a,c=lt(t,s+16),l=4294967295==c;if(l){if(s=lt(t,s-12),101075792!=lt(t,s))return void e("invalid zip file",null);u=a=lt(t,s+32),c=lt(t,s+48)}for(var f=function(s){var u=oe(t,c,l),f=u[0],h=u[1],p=u[2],d=u[3],v=u[4],y=u[5],w=ie(t,y);c=v;var b=function(t,n){t?(r(),e(t,null)):(o[d]=n,--a||e(null,o))};if(f)if(8==f){var m=t.subarray(w,w+h);if(h<32e4)try{b(null,At(m,new i(p)))}catch(t){b(t,null)}else n.push(Mt(m,{size:p},b))}else b("unknown compression type "+f,null);else b(null,L(t,w,w+h))},h=0;h<u;++h)f();return r}function ge(t){for(var e={},n=t.length-22;101010256!=lt(t,n);--n)if(!n||t.length-n>65558)throw"invalid zip file";var r=ct(t,n+8);if(!r)return{};var o=lt(t,n+16),s=4294967295==o;if(s){if(n=lt(t,n-12),101075792!=lt(t,n))throw"invalid zip file";r=lt(t,n+32),o=lt(t,n+48)}for(var a=0;a<r;++a){var u=oe(t,o,s),c=u[0],l=u[1],f=u[2],h=u[3],p=u[4],d=u[5],v=ie(t,d);if(o=p,c){if(8!=c)throw"unknown compression type "+c;e[h]=At(t.subarray(v,v+l),new i(f))}else e[h]=L(t,v,v+l)}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileNameWithoutExt=e.getFileName=void 0,e.getFileName=function(t){var e=t.lastIndexOf("/");return e>=0?t.substr(e+1):t},e.getFileNameWithoutExt=function(t){var e=t.lastIndexOf(".");return e>0?t.substr(0,e):t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRelativeOffsetY=void 0,e.getRelativeOffsetY=function(t,e){var n=e.currentStyle||window.getComputedStyle(e),r=e.offsetTop+e.offsetHeight;return n.marginBottom&&(r+=parseFloat(n.marginBottom)),Math.max(0,r-t.offsetHeight)}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.browseViewFactory=e.BrowseView=void 0;var o=n(0),s=n(7),a=n(6),u=n(3),c=n(4),l=function(){function t(t,e,n,r,i,o){var s=this;this._menuView=t,this._router=e,this._loading=n,this._prompt=r,this._navbar=i,this._fileStorage=o,this._menuView.onLeave=function(){return s.end()}}return t.prototype.init=function(t){this._menuView.start(),this._navbar.setPathTheme("files"),this._context=t,t.tree?this.reload():this.loadTree()},t.prototype.destroy=function(){this._menuView.stop()},t.prototype.loadTree=function(){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(e){switch(e.label){case 0:return[4,this._menuView.pauseInputListener((function(){return r(t,void 0,void 0,(function(){var t=this;return i(this,(function(e){switch(e.label){case 0:return[4,this._loading.handle((function(){return r(t,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:return this._navbar.setPath("Loading..."),[4,this._fileStorage.getAllFiles()];case 1:return t=n.sent(),e=s.parseTree(t),this._context.tree=e,this._context.current=e,[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))}))];case 1:return e.sent(),this.reload(),[2]}}))}))},t.prototype.reload=function(){var t=this,e=this._context.current.children;e.sort((function(t,e){return e.children.length-t.children.length})),this._navbar.setPath("/"+(this._context.current.path||"")),this._menuView.setItems(e.map((function(e){var n=function(t){if(t.children.length>0)return"folder";if(t.name.toLowerCase().endsWith(".zip"))return"archive";return"file"}(e);return new c.SimpleMenuItem(e.name,null,n,"folder"===n?"Open folder":"archive"===n?"Open archive":"",(function(){return t.open(e,n)}))})))},t.prototype.open=function(t,e){switch(e){case"folder":this.openDirectory(t);break;case"archive":this.openArchive(t);break;default:this.showNotSupportedPrompt()}},t.prototype.openDirectory=function(t){var e={tree:this._context.tree,current:t};this._router.navigate("browse",e)},t.prototype.openArchive=function(t){return r(this,void 0,void 0,(function(){var e,n=this;return i(this,(function(o){switch(o.label){case 0:return[4,this._menuView.pauseInputListener((function(){return r(n,void 0,void 0,(function(){var n=this;return i(this,(function(o){switch(o.label){case 0:return[4,this._loading.handle((function(){return r(n,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,5]),[4,this._fileStorage.readFile(t.path)];case 1:return n=i.sent(),[4,a.createBrowseArchiveContext(n,t.path)];case 2:return e=i.sent(),[3,5];case 3:return r=i.sent(),[4,this._prompt.promptError(r)];case 4:return i.sent(),[3,5];case 5:return[2]}}))}))}))];case 1:return o.sent(),[2]}}))}))}))];case 1:return o.sent(),e&&this._router.navigate("browseArchive",e),[2]}}))}))},t.prototype.showNotSupportedPrompt=function(){var t=this;this._menuView.pauseInputListener((function(){return r(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._prompt.prompt("This file is not supported.",!1)];case 1:return t.sent(),[2]}}))}))}))},t.prototype.end=function(){this._router.navigateBack()},t}();e.BrowseView=l,e.browseViewFactory=function(t){return new l(u.menuViewFactory(t),o.container("Router"),o.container("Loading"),o.container("Prompt"),o.container("Navbar"),o.container("FileStorage"))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.rootViewFactory=e.RootView=void 0;var o=n(0),s=n(3),a=n(4),u=function(){function t(t,e,n){var r=this;this._menuView=t,this._navbar=e,this._router=n,this._menuView.onLeave=function(){return r.leave()}}return t.prototype.init=function(){var t=this;this._menuView.start(),this._navbar.setPathTheme("transparent"),this._menuView.setItems([new a.SimpleMenuItem("Browse files","Find archive to extract files","folder","Select",(function(){return t._router.navigate("browse",{tree:null,current:null})})),new a.SimpleMenuItem("More N4NO apps","Explore new apps","star","Select",(function(){return t.openMoreApps()})),new a.SimpleMenuItem("Exit","Close app","exit","Select",(function(){return t.leave()}))])},t.prototype.openMoreApps=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return window.open("http://kaios.n4no.com/"),[2]}))}))},t.prototype.destroy=function(){this._menuView.stop()},t.prototype.leave=function(){window.close()},t}();e.RootView=u,e.rootViewFactory=function(t){return new u(s.menuViewFactory(t),o.container("Navbar"),o.container("Router"))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.splashViewFactory=e.SplashView=void 0;var o=n(0),s=n(24),a=function(){function t(t,e){this._loading=t,this._adsManager=e}return t.prototype.bind=function(){this._container=document.getElementById("splash")},t.prototype.init=function(){s.track("app-started"),this._container.style.display="block",this._loading.show(),this.showAd()},t.prototype.destroy=function(){this._loading.hide(),this._container.style.display="none"},t.prototype.showAd=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._adsManager.tryDisplay()];case 1:return t.sent(),this.onEnd&&this.onEnd(),[2]}}))}))},t}();e.SplashView=a,e.splashViewFactory=function(){return new a(o.container("Loading"),o.container("AdsManager"))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.track=void 0;var r=n(1);e.track=function(t){if(r.ENV.tracking){var e=function(){var t=localStorage.getItem("__clientId");t||(e=new Uint8Array(16),window.crypto.getRandomValues(e),t=Array.from(e,(function(t){return t<10?"0"+String(t):t.toString(16)})).join(""),localStorage.setItem("__clientId",t));var e;return t}(),n="http://kaios.n4no.com/api/tracker.php?app="+r.ENV.appName+"&v="+r.ENV.appVersion+"&c="+e+"&e="+t+"&f=i",i=document.createElement("img");i.src=n,i.style.position="absolute",i.style.left="-99999px",i.style.right="-99999px",document.body.appendChild(i)}}}]);